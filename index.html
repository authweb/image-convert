<!DOCTYPE html>
<html lang="ru">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Конвертер изображений | Authweb</title>
	<script src="https://cdn.tailwindcss.com"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
	<style>
		/* Основные стили */
		body {
			transition: background-color 0.3s, color 0.3s;
		}

		/* Стили для зоны загрузки */
		#dropZone {
			border: 2px dashed #3b82f6;
			border-radius: 12px;
			transition: all 0.3s ease;
			background-color: rgba(59, 130, 246, 0.05);
		}

		#dropZone.drag-over {
			border-color: #10b981;
			background-color: rgba(16, 185, 129, 0.1);
			box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
		}

		#dropZone:hover {
			border-color: #2563eb;
			background-color: rgba(59, 130, 246, 0.1);
		}

		/* Анимации */
		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(10px);
			}

			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		@keyframes fadeOut {
			from {
				opacity: 1;
			}

			to {
				opacity: 0;
			}
		}

		/* Стили для карточек файлов */
		.file-card {
			animation: fadeIn 0.3s ease-out;
			transition: all 0.2s ease;
			border-left: 3px solid #3b82f6;
		}

		.file-card:hover {
			transform: translateY(-2px);
			box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
		}

		/* Стили для кнопок форматов */
		.format-btn {
			transition: all 0.2s ease;
		}

		.format-btn.active {
			background-color: #3b82f6;
			color: white;
			border-color: #3b82f6;
		}

		/* Стили для прогресс-бара */
		#progressBar {
			background: linear-gradient(90deg, #3b82f6 0%, #10b981 100%);
			transition: width 0.3s ease;
		}

		/* Адаптивность */
		@media (max-width: 768px) {
			.converter-buttons {
				flex-direction: column;
			}

			.format-options {
				grid-template-columns: repeat(2, 1fr);
			}
		}

		/* Стили для уведомлений */
		.toast {
			position: fixed;
			bottom: 20px;
			right: 20px;
			padding: 12px 16px;
			border-radius: 8px;
			color: white;
			display: flex;
			align-items: center;
			gap: 8px;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
			z-index: 1000;
			animation: slideIn 0.3s ease-out;
		}

		.toast.success {
			background: #10B981;
		}

		.toast.error {
			background: #EF4444;
		}

		.toast.warning {
			background: #F59E0B;
		}

		.toast.fade-out {
			animation: fadeOut 0.3s ease-out forwards;
		}

		@keyframes slideIn {
			from {
				transform: translateX(100%);
				opacity: 0;
			}

			to {
				transform: translateX(0);
				opacity: 1;
			}
		}
	</style>
</head>

<body
	class="bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 flex items-center justify-center min-h-screen p-4">
	<!-- Кнопка переключения темы -->
	<button id="themeToggle"
		class="fixed top-4 right-4 p-3 bg-white dark:bg-gray-700 rounded-full shadow-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-all z-50">
		<i id="themeIcon" class="fas fa-moon"></i>
	</button>

	<div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow-xl w-full max-w-3xl">
		<!-- Заголовок с логотипом -->
		<div class="flex flex-col items-center mb-6">
			<div class="w-16 h-16 bg-blue-100 dark:bg-blue-900/30 rounded-full flex items-center justify-center mb-3">
				<i class="fas fa-exchange-alt text-blue-500 text-2xl"></i>
			</div>
			<h1 class="text-2xl font-bold text-center">
				Конвертер изображений
			</h1>
			<p class="text-sm text-gray-500 dark:text-gray-400 mt-1">от <a href="https://authweb.ru" target="_blank"
					class="text-blue-500 hover:text-blue-600 dark:hover:text-blue-400">Authweb</a></p>
		</div>

		<!-- Информационная карточка -->
		<div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6">
			<div class="flex items-start">
				<i class="fas fa-info-circle text-blue-500 mt-1 mr-3"></i>
				<div>
					<h3 class="font-medium">Как пользоваться конвертером?</h3>
					<ol class="list-decimal list-inside text-sm mt-2 space-y-1">
						<li>Загрузите изображения (перетащите или выберите файлы)</li>
						<li>Выберите формат для конвертации</li>
						<li>Настройте параметры качества (для JPG)</li>
						<li>Нажмите кнопку "Конвертировать"</li>
					</ol>
				</div>
			</div>
		</div>

		<!-- Улучшенная зона загрузки -->
		<div id="dropZone"
			class="relative p-8 text-center cursor-pointer border-2 border-dashed rounded-lg flex flex-col items-center justify-center space-y-3 mb-6 transition-all">
			<div class="absolute inset-0 bg-blue-500/5 rounded-lg opacity-0 transition-opacity" id="dropOverlay"></div>
			<i class="fas fa-cloud-upload-alt text-4xl text-blue-400"></i>
			<p class="text-lg font-medium">Перетащите изображения сюда</p>
			<p class="text-gray-500 dark:text-gray-400 text-sm">или</p>
			<label for="imageInput"
				class="relative bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md cursor-pointer transition-all inline-flex items-center group">
				<span class="relative z-10 flex items-center">
					<i class="fas fa-folder-open mr-2"></i> Выберите файлы
				</span>
				<span
					class="absolute inset-0 bg-blue-600 rounded-md opacity-0 group-hover:opacity-100 transition-opacity"></span>
			</label>
			<input type="file" id="imageInput" accept="image/*" multiple class="hidden">
			<p class="text-xs text-gray-400 mt-2">Поддерживаемые форматы: JPG, PNG, GIF, WEBP, TIFF</p>
		</div>

		<!-- Список загруженных изображений -->
		<div id="imageList" class="space-y-3 mb-6 max-h-96 overflow-y-auto">
			<!-- Состояние "список пуст" -->
			<div id="emptyState" class="text-center py-8 text-gray-400">
				<i class="fas fa-images text-3xl mb-2"></i>
				<p>Загруженные изображения появятся здесь</p>
			</div>
		</div>

		<!-- Настройки конвертации -->
		<div class="bg-gray-50 dark:bg-gray-700/30 p-4 rounded-lg mb-6">
			<h3 class="font-medium mb-3 flex items-center">
				<i class="fas fa-cog mr-2 text-blue-500"></i> Настройки конвертации
			</h3>

			<div class="space-y-4">
				<!-- Выбор формата -->
				<div>
					<label class="block text-sm font-medium mb-2 flex items-center">
						<i class="fas fa-file-export mr-2 text-blue-400"></i>
						Выходной формат
					</label>
					<div class="grid grid-cols-3 gap-2 format-options">
						<button data-format="png"
							class="format-btn active py-2 px-3 rounded-md border border-gray-300 dark:border-gray-600 text-center text-sm transition-all">
							<i class="fab fa-pagelines mr-1"></i> PNG
						</button>
						<button data-format="jpeg"
							class="format-btn py-2 px-3 rounded-md border border-gray-300 dark:border-gray-600 text-center text-sm transition-all">
							<i class="fas fa-file-image mr-1"></i> JPG
						</button>
						<button data-format="webp"
							class="format-btn py-2 px-3 rounded-md border border-gray-300 dark:border-gray-600 text-center text-sm transition-all">
							<i class="fab fa-chrome mr-1"></i> WebP
						</button>
					</div>
				</div>

				<!-- Настройки качества -->
				<div id="qualityContainer" class="hidden">
					<div class="flex justify-between items-center mb-2">
						<label class="font-medium flex items-center">
							<i class="fas fa-sliders-h mr-2 text-blue-400"></i>
							Качество
						</label>
						<span id="qualityValue" class="text-sm font-bold">80%</span>
					</div>
					<input type="range" id="qualitySlider" min="10" max="100" value="80"
						class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
				</div>
			</div>
		</div>

		<!-- Прогресс конвертации -->
		<div id="progressContainer" class="hidden mb-6">
			<div class="flex justify-between items-center mb-2">
				<div class="flex items-center">
					<i class="fas fa-sync-alt animate-spin mr-2 text-blue-500"></i>
					<span class="font-medium">Идет конвертация...</span>
				</div>
				<span id="progressPercent" class="font-bold">0%</span>
			</div>
			<div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
				<div id="progressBar" class="h-2 rounded-full" style="width: 0%"></div>
			</div>
			<p class="text-xs text-gray-500 mt-1" id="progressStatus">Подготовка к конвертации...</p>
		</div>

		<!-- Кнопки действий -->
		<div class="grid grid-cols-2 gap-3 converter-buttons">
			<button id="convertAllButton"
				class="col-span-2 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-all transform hover:scale-[1.02]">
				<i class="fas fa-sync-alt"></i>
				<span>Конвертировать все</span>
			</button>

			<button id="downloadAllBtn"
				class="bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-all transform hover:scale-[1.02]">
				<i class="fas fa-download"></i>
				<span>Скачать все</span>
			</button>

			<button id="clearAllButton"
				class="bg-gradient-to-r from-gray-200 to-gray-300 hover:from-gray-300 hover:to-gray-400 dark:from-gray-700 dark:to-gray-800 dark:hover:from-gray-800 dark:hover:to-gray-900 text-gray-800 dark:text-gray-200 py-3 rounded-lg font-medium flex items-center justify-center gap-2 transition-all transform hover:scale-[1.02]">
				<i class="fas fa-trash-alt"></i>
				<span>Очистить все</span>
			</button>
		</div>
	</div>

	<script>
		// Инициализация темы (перенесено из converter.js для гарантированной загрузки)
		function initTheme() {
			const savedTheme = localStorage.getItem('theme') ||
				(window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');

			if (savedTheme === 'dark') {
				document.documentElement.classList.add('dark');
				document.getElementById('themeIcon').className = 'fas fa-sun';
			} else {
				document.documentElement.classList.remove('dark');
				document.getElementById('themeIcon').className = 'fas fa-moon';
			}
		}

		document.addEventListener('DOMContentLoaded', function () {
			initTheme();

			// Инициализация слайдера качества
			const qualitySlider = document.getElementById('qualitySlider');
			if (qualitySlider) {
				qualitySlider.addEventListener('input', function () {
					document.getElementById('qualityValue').textContent = `${this.value}%`;
					this.style.background = `linear-gradient(to right, #3b82f6 0%, #3b82f6 ${this.value}%, #e5e7eb ${this.value}%, #e5e7eb 100%)`;
				});
				qualitySlider.dispatchEvent(new Event('input'));
			}

			// Переключение форматов
			document.querySelectorAll('.format-btn').forEach(btn => {
				btn.addEventListener('click', function () {
					document.querySelectorAll('.format-btn').forEach(b => b.classList.remove('active'));
					this.classList.add('active');

					const qualityContainer = document.getElementById('qualityContainer');
					if (qualityContainer) {
						qualityContainer.classList.toggle('hidden', this.dataset.format !== 'jpeg');
					}
				});
			});
		});
	</script>

	<script src="converter.js"></script>
</body>

</html>
